<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <title>Registration Successful - SkillForge Academy</title>
    <link rel="stylesheet" type="text/css" href="css/success.css" />
    <link rel="icon" type="image/x-icon" href="assets/brand-icon.png" />
  </head>
  <body>
    <!-- Navbar -->
    <div class="navbar">
      <div class="nav-content">
        <div class="logo-container">
          <div class="logo-icon">âš¡</div>
          <div class="logo-text">
            <span class="logo-main">SkillForge</span>
            <span class="logo-sub">Academy</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="box">
        <div class="confetti">ðŸŽŠ</div>
        <div class="title">
          <h1>ðŸŽ‰ Success!</h1>
        </div>
        <img src="assets/success.svg" alt="Success" />
        <div class="success-message">
          <p class="main-message">
            <strong>Welcome to SkillForge Academy!</strong>
          </p>
          <p>
            Thank you for registering! Your spot is confirmed. ðŸš€<br />
            We'll email you the workshop details and joining link shortly.
          </p>
        </div>
        
        <div class="next-steps">
          <h3>What Happens Next?</h3>
          <ul>
            <li>âœ… Check your email for confirmation</li>
            <li>ðŸ“… Add the workshop to your calendar</li>
            <li>ðŸ“š Review pre-workshop materials (if any)</li>
            <li>ðŸ’¬ Join our community Discord server</li>
          </ul>
        </div>

        <p class="contact-info">
          Questions? Reach us at
          <a href="mailto:hello@skillforge.academy">hello@skillforge.academy</a>
        </p>
        
        <div class="button">
          <input type="button" value="Back to Home" id="home-btn" />
        </div>
      </div>
    </div>

    <pre class="json" id="session-data"></pre>

    <!-- Js file here -->
    <script>
      var sessionData = document.getElementById("session-data");

      // Pulling the session-id out of the search bar
      var params = new URLSearchParams(window.location.search);
      var id = params.get("id");

      if (id) {
        fetch("/checkout-session?id=" + id)
          .then((response) => response.json())
          .then((session) => {
            sessionData.innerText = JSON.stringify(session, null, 2);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      var btn = document.getElementById("home-btn");
      var domain = "http://localhost:3000";
      btn.addEventListener("click", function (e) {
        e.preventDefault();
        location.href = domain;
      });

      // Confetti animation
      const createConfetti = () => {
        const confetti = document.createElement('div');
        confetti.className = 'confetti-piece';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
        confetti.style.backgroundColor = ['#FF6B35', '#FF006E', '#00D9FF', '#8B5CF6'][Math.floor(Math.random() * 4)];
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 5000);
      };

      for (let i = 0; i < 50; i++) {
        setTimeout(createConfetti, i * 30);
      }
    </script>

    <style>
      .confetti-piece {
        position: fixed;
        top: -10px;
        width: 10px;
        height: 10px;
        background: #FF6B35;
        animation: fall linear forwards;
        z-index: 1000;
      }

      @keyframes fall {
        to {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }
    </style>
  </body>
</html>